{% extends 'cookbook/base.html' %}

{% block title %}
    {{ recipe.title }}
{% endblock %}

{% block content %}
    <h1>{{ recipe.title }}</h1>
    <div id="information">
        {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
        {% if recipe.yields %}
            <p>Yields: {{ recipe.yields }}</p>
        {% endif %}
        {% if recipe.cooking_time %}
            <p>Cooking time: {{ recipe.cooking_time }}</p>
            {% if recipe.description %}
            {% endif %}
            <p>{{ recipe.description }}</p>
        {% endif %}
    </div>
    <div id="ingredients">
        <h2>Ingredients</h2>
        <ul>
            {% for part in recipe.ingredients %}
                {% if part.name %}
                    <h3>{{ part.name }}</h3>
                {% endif %}
                {% for ingredient in part.list %}
                    <li>{{ ingredient }}</li>
                {% endfor %}
            {% endfor %}
        </ul>
    </div>
    <div id="instructions">
        <h2>Instructions</h2>
        <ol>
            {% for part in recipe.instructions %}
                {% if part.name %}
                    <h3>{{ part.name }}</h3>
                {% endif %}
                {% for step in part.list %}
                    <li>
                        {{ step }}
                    </li>
                {% endfor %}
            {% endfor %}
        </ol>
    </div>

    <div id="changelog" style="display: none;">
        <h2>Changelog</h2>
        <ul>
            {% for change in recipe.changelog %}
                <li>
                    Date: {{ change.date }}
                    <ul>
                        {% for comment in change.change %}
                            <li>{{ comment }}</li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    </div>

    <button onclick="changeLogButton()">Toggle changelog</button>

    <script>
        function changeLogButton() {
            var x = document.getElementById("changelog");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }
    </script>
{% endblock %}

{% block sidebar %}

    <h3>Downloads</h3>
    <li><a class="button" href="{% url 'cookbook:download_yaml' recipe.pk %}">Recipe source</a></li>
    <li><a class="button" href="{% url 'cookbook:download_tex' recipe.pk %}">Recipe .tex</a></li>
    <li><a class="button" href="{% url 'cookbook:download_pdf' recipe.pk %}">Recipe PDF</a></li>

{% endblock %}