{% autoescape off %}

\documentclass[a4paper, 11pt]{article}

\usepackage{cookbook}


\title{ {{ recipe.name }} }

{% if recipe.yields %}
\yields{ {{ recipe.yields }} }
{% endif %}

{% if recipe.last_changed %}
\date{ {{ recipe.date_published }} }
{% endif %}

{% if recipe.description %}
\description{ {{ recipe.description }} }
{% endif %}

{% if recipe.cookingtime %}
\cookingitme{ {{ recipe.cookingtime }} }
{% endif %}

{% if recipe.temperature %}
\temperature{ {{ recipe.temperature }} }
{% endif %}

{% if recipe.image %}
\image{ {{ recipe.image }} }
{% endif %}

{% if recipe.changelog %}
\date{ {{ recipe.changelog.0.date }} }
{% endif %}

\providecommand\ingredients{
    {% if recipe.parts %}
    {% for part in recipe.parts %}
    \ingredientpart{ {{ part.name }} }
    \begin{compactlist}
        {% for ingredient in part.ingredients %}
        \ingredient {{ ingredient }}
        {% endfor %}
    \end{compactlist}
    {% endfor %}
    {% else %}
    \begin{compactlist}
    {% for ingredient in recipe.ingredients %} \ingredient {{ ingredient }}
    {% endfor %}
    \end{compactlist}
    {% endif %}
}

\providecommand{\instructions}{
    {% if recipe.parts %}
    {% for part in recipe.parts %}
    \steppart{ {{ part.name }} }
    \begin{steps}
        {% for step in part.steps %}
        \step {{ step }}
        {% endfor %}
    \end{steps}
    {% endfor %}
    {% else %}
    \begin{steps}
    {% spaceless %}{% for step in recipe.steps %}
        \step {{ step }}
        {% endfor %}{% endspaceless %}
    \end{steps}
    {% endif %}
}

{% if recipe.changelog %}
\providecommand{\changelog}{
    \begin{itemize}
        {% for change in recipe.changelog %}
            \item {{ change.date }}\\
        {% for line in change.change %}
            {{ line }}\\
        {% endfor %}
        {% endfor %}
    \end{itemize}
    {% endif %}

}

\makerecipe
{% endautoescape %}